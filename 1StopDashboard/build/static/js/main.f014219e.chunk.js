(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{400:function(e,t,a){e.exports=a(633)},633:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a.n(r),n=a(352),l=a.n(n),c=a(376),s=a(704),i=a(699),d=a(712),m=a(723),u=a(716),p=a(710),g=a(714),E=a(724),y=a(725),h=a(726),x=a(701),b=a(706),f=a(705),v=a(713),k=a(709),w=a(690),F=a(698),O=a(692),D=a(120),C=a(121),M=a(91),S=a(129),A=a(182),j=a(707),B=a(369),R=a(119),L=a(691),G=a(125),T=a(708),W=a(372),N=a(720),I=a(702),P=a(377),K=a(722),J=a(356),$=a(717),Y=a(718),Q=a(367),X=a.n(Q),z=a(366),V=a.n(z);var _=e=>{var t,a,n,l,c,s,i,m,p,E,y,h,x;let{selectedCity:b="all",cityMapping:f={}}=e;const[k,F]=Object(r.useState)(!0),[A,j]=Object(r.useState)({}),[B,R]=Object(r.useState)(!1);Object(r.useEffect)(()=>{T()},[]);const T=()=>{const e={all:{name:"All Cities",startDate:"2022-04-01",growthFactor:1.15,baseValue:300,color:"#2563EB"},LYGRRATQ7EGG2:{name:"London",startDate:"2022-12-01",growthFactor:1.18,baseValue:65,color:"#2563EB"},L4NE8GPX89J3A:{name:"Ottawa",startDate:"2023-03-15",growthFactor:1.12,baseValue:40,color:"#10B981"},LDK6Z980JTKXY:{name:"Kitchener-Waterloo",startDate:"2023-06-01",growthFactor:1.2,baseValue:25,color:"#F59E0B"},LXMC6DWVJ5N7W:{name:"Hamilton",startDate:"2023-09-10",growthFactor:1.08,baseValue:20,color:"#EF4444"},LG0VGFKQ25XED:{name:"Calgary",startDate:"2023-11-20",growthFactor:1.25,baseValue:10,color:"#8B5CF6"}},t={Q1:.9,Q2:1.15,Q3:1.2,Q4:1},a={},r={};Object.keys(e).forEach(o=>{if("all"===o)return;const n=e[o],l=[],c=new Date(n.startDate),s=c.getFullYear(),i=Math.floor(c.getMonth()/3)+1,d=new Date,m=d.getFullYear(),u=Math.floor(d.getMonth()/3)+1,p=4*(m-s)+(u-i)+9;let g=null,E=n.baseValue;for(let e=0;e<p;e++){const a=s+Math.floor((i+e-1)/4),o=(i+e-1)%4+1,c=`Q${o} ${a}`,d=a>m||a===m&&o>u,p=Math.pow(n.growthFactor,.25),y=t[`Q${o}`],h=.95+.1*Math.random();E=0===e?Math.round(n.baseValue*y*h):Math.round(g*p*y*h);let x=null;null!==g&&(x=100*(E/g-1));const b={name:c,year:a,quarter:o,value:E,growthRate:null!==x?parseFloat(x.toFixed(1)):null,projected:d};l.push(b),r[c]||(r[c]={name:c,year:a,quarter:o,total:0,projected:d,cities:{}}),r[c].total+=E,r[c].cities[n.name]=E,g=E}a[o]={data:l,color:n.color,annualGrowthTarget:100*(n.growthFactor-1),startDate:n.startDate}});const o=Object.values(r).sort((e,t)=>e.year!==t.year?e.year-t.year:e.quarter-t.quarter),n=[];let l=null;o.forEach(e=>{let t=null;null!==l&&(t=100*(e.total/l-1)),n.push({name:e.name,year:e.year,quarter:e.quarter,value:e.total,growthRate:null!==t?parseFloat(t.toFixed(1)):null,projected:e.projected}),l=e.total}),a.all={data:n,color:e.all.color,annualGrowthTarget:100*(e.all.growthFactor-1),startDate:e.all.startDate},j(a),F(!1)},W=A[b]||A.all,N=()=>{if(!W||!W.data)return 0;const e=W.data.findIndex(e=>e.projected);if(e<=0||e>=W.data.length-4)return 0;const t=W.data[e-1],a=W.data.find(e=>e.quarter===t.quarter&&e.year===t.year+1);return a?100*(a.value/t.value-1):0},I=e=>{if(f[e])return f[e];switch(e){case"all":return"All Cities";case"LYGRRATQ7EGG2":return"London";case"L4NE8GPX89J3A":return"Ottawa";case"LDK6Z980JTKXY":return"Kitchener-Waterloo";case"LXMC6DWVJ5N7W":return"Hamilton";case"LG0VGFKQ25XED":return"Calgary";default:return e}};if(k)return o.a.createElement(d.a,{sx:{width:"100%",height:"400px",display:"flex",alignItems:"center",justifyContent:"center"}},o.a.createElement(u.a,{variant:"h6"},"Loading city growth data..."));const P=null===W||void 0===W?void 0:null===(t=W.data)||void 0===t?void 0:t.findIndex(e=>e.projected);null===W||void 0===W||null===(a=W.data)||void 0===a||a.slice(0,P),null===W||void 0===W||null===(n=W.data)||void 0===n||n.slice(P);return o.a.createElement(d.a,{sx:{mb:5}},o.a.createElement(u.a,{variant:"h5",sx:{mb:3,fontWeight:"medium",color:"#1F2937"}},"Quarterly Growth of ",I(b)),o.a.createElement(v.a,{container:!0,spacing:3,sx:{mb:3}},o.a.createElement(v.a,{item:!0,xs:12,md:4},o.a.createElement(g.a,{sx:{p:3,borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",background:"linear-gradient(135deg, #3B82F6, #2563EB)"}},o.a.createElement(u.a,{variant:"subtitle2",sx:{color:"rgba(255, 255, 255, 0.9)",mb:1}},"Annual Growth Rate"),o.a.createElement(u.a,{variant:"h4",sx:{fontWeight:"bold",color:"white",mb:1}},N().toFixed(1),"%"),o.a.createElement(u.a,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)"}},"Target: ",null===W||void 0===W?void 0:null===(l=W.annualGrowthTarget)||void 0===l?void 0:l.toFixed(0),"%"))),o.a.createElement(v.a,{item:!0,xs:12,md:4},o.a.createElement(g.a,{sx:{p:3,borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",background:"linear-gradient(135deg, #10B981, #059669)"}},o.a.createElement(u.a,{variant:"subtitle2",sx:{color:"rgba(255, 255, 255, 0.9)",mb:1}},"Weekly Average Orders"),o.a.createElement(u.a,{variant:"h4",sx:{fontWeight:"bold",color:"white",mb:1}},(()=>{if(!W||!W.data)return 0;const e=W.data.findIndex(e=>e.projected)-1;if(e<0)return 0;const t=W.data[e].value;return Math.round(t/13)})().toLocaleString()),o.a.createElement(u.a,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)"}},"Based on current quarter"))),o.a.createElement(v.a,{item:!0,xs:12,md:4},o.a.createElement(g.a,{sx:{p:3,borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",background:"linear-gradient(135deg, #8B5CF6, #7C3AED)"}},o.a.createElement(u.a,{variant:"subtitle2",sx:{color:"rgba(255, 255, 255, 0.9)",mb:1}},"Projected Annual Orders"),o.a.createElement(u.a,{variant:"h4",sx:{fontWeight:"bold",color:"white",mb:1}},(()=>{if(!W||!W.data)return 0;const e=W.data.findIndex(e=>e.projected)-1;return e<0?0:(W.data[e],W.data.slice(e+1,e+5).reduce((e,t)=>e+t.value,0))})().toLocaleString()),o.a.createElement(u.a,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)"}},"Next 4 quarters")))),o.a.createElement(g.a,{sx:{p:3,mb:3,borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",bgcolor:"#F9FAFB"}},o.a.createElement(u.a,{variant:"h6",sx:{mb:2,fontWeight:"medium"}},I(b)),o.a.createElement(v.a,{container:!0,spacing:3},o.a.createElement(v.a,{item:!0,xs:12,md:4},o.a.createElement(u.a,{variant:"body2",color:"text.secondary",sx:{mb:1}},o.a.createElement("strong",null,"Started operations:")," ",(e=>{switch(e){case"all":return"Various dates";case"LYGRRATQ7EGG2":return"December 2022";case"L4NE8GPX89J3A":return"March 2023";case"LDK6Z980JTKXY":return"June 2023";case"LXMC6DWVJ5N7W":return"September 2023";case"LG0VGFKQ25XED":return"November 2023";default:return"Unknown"}})(b)),o.a.createElement(u.a,{variant:"body2",color:"text.secondary",sx:{mb:1}},o.a.createElement("strong",null,"Annual growth target:")," ",null===W||void 0===W?void 0:null===(c=W.annualGrowthTarget)||void 0===c?void 0:c.toFixed(0),"%")),o.a.createElement(v.a,{item:!0,xs:12,md:4},o.a.createElement(u.a,{variant:"body2",color:"text.secondary",sx:{mb:1}},o.a.createElement("strong",null,"Latest quarterly orders:")," ",(null===W||void 0===W?void 0:null===(s=W.data[P-1])||void 0===s?void 0:s.value.toLocaleString())||"N/A"),o.a.createElement(u.a,{variant:"body2",color:"text.secondary",sx:{mb:1}},o.a.createElement("strong",null,"Orders next quarter:")," ",(null===W||void 0===W?void 0:null===(i=W.data[P])||void 0===i?void 0:i.value.toLocaleString())||"N/A")),o.a.createElement(v.a,{item:!0,xs:12,md:4},o.a.createElement(u.a,{variant:"body2",color:"text.secondary",sx:{mb:1}},o.a.createElement("strong",null,"Latest growth rate:")," ",(e=>{const t=P>0?null===W||void 0===W?void 0:null===(e=W.data[P-1])||void 0===e?void 0:e.growthRate:null;return null!==t?`${t>=0?"+":""}${t}%`:"N/A"})()),o.a.createElement(u.a,{variant:"body2",color:"text.secondary",sx:{mb:1}},o.a.createElement("strong",null,"Status:")," ",(()=>{const e=N(),t=(null===W||void 0===W?void 0:W.annualGrowthTarget)||0;return e>=1.1*t?"Exceeding Target":e>=.9*t?"On Target":e>=.7*t?"Below Target":"Needs Attention"})())))),o.a.createElement(g.a,{sx:{p:3,mb:3,borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(u.a,{variant:"h6",sx:{mb:3,fontWeight:"medium"}},"Quarterly Orders"),o.a.createElement(d.a,{sx:{height:"350px"}},o.a.createElement(w.a,{width:"100%",height:"100%"},o.a.createElement(L.a,{data:(null===W||void 0===W?void 0:W.data)||[]},o.a.createElement(O.a,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),o.a.createElement(D.a,{dataKey:"name",tick:{fill:"#6B7280"}}),o.a.createElement(C.a,{tick:{fill:"#6B7280"}}),o.a.createElement(M.a,{contentStyle:{backgroundColor:"#FFFFFF",borderRadius:"0.375rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"none"},formatter:(e,t)=>[e.toLocaleString(),"value"===t?"Orders":t],labelFormatter:(e,t)=>{var a;const r=null===t||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:a.payload;return`${e}${(null===r||void 0===r?void 0:r.projected)?" (Projected)":" (Historical)"}`}}),o.a.createElement(S.a,{wrapperStyle:{paddingTop:"10px"}}),o.a.createElement(J.a,{x:null===W||void 0===W?void 0:null===(m=W.data)||void 0===m?void 0:null===(p=m[P])||void 0===p?void 0:p.name,stroke:"#6B7280",strokeDasharray:"3 3",label:{value:"Today",position:"insideTopLeft",fill:"#6B7280"}}),o.a.createElement(G.a,{dataKey:"value",name:"Orders",fill:e=>(null===e||void 0===e?void 0:e.projected)?"#64748B":(null===W||void 0===W?void 0:W.color)||"#2563EB",opacity:e=>(null===e||void 0===e?void 0:e.projected)?.6:1,radius:[4,4,0,0]})))),o.a.createElement(d.a,{sx:{display:"flex",justifyContent:"space-between",mt:2,pt:2,borderTop:"1px dashed #CBD5E1",color:"#64748B",fontSize:"0.875rem"}},o.a.createElement(d.a,{sx:{display:"flex",alignItems:"center"}},o.a.createElement(d.a,{sx:{width:12,height:12,backgroundColor:(null===W||void 0===W?void 0:W.color)||"#2563EB",borderRadius:1,mr:1}}),o.a.createElement(u.a,{variant:"body2"},"Historical Data")),o.a.createElement(d.a,{sx:{display:"flex",alignItems:"center"}},o.a.createElement(d.a,{sx:{width:12,height:12,backgroundColor:"#64748B",borderRadius:1,opacity:.6,mr:1}}),o.a.createElement(u.a,{variant:"body2"},"Projected Data")))),o.a.createElement(g.a,{sx:{p:3,mb:3,borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(u.a,{variant:"h6",sx:{mb:3,fontWeight:"medium"}},"Quarter-over-Quarter Growth Rate (%)"),o.a.createElement(d.a,{sx:{height:"350px"}},o.a.createElement(w.a,{width:"100%",height:"100%"},o.a.createElement(L.a,{data:(null===W||void 0===W?void 0:null===(E=W.data)||void 0===E?void 0:E.filter(e=>null!==e.growthRate))||[]},o.a.createElement(O.a,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),o.a.createElement(D.a,{dataKey:"name",tick:{fill:"#6B7280"}}),o.a.createElement(C.a,{domain:[-5,30],tick:{fill:"#6B7280"}}),o.a.createElement(M.a,{contentStyle:{backgroundColor:"#FFFFFF",borderRadius:"0.375rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"none"},formatter:(e,t)=>["growthRate"===t?`${e}%`:e,"growthRate"===t?"Growth Rate":t],labelFormatter:(e,t)=>{var a;const r=null===t||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:a.payload;return`${e}${(null===r||void 0===r?void 0:r.projected)?" (Projected)":" (Historical)"}`}}),o.a.createElement(S.a,{wrapperStyle:{paddingTop:"10px"}}),o.a.createElement(J.a,{y:0,stroke:"#94A3B8",strokeWidth:1}),o.a.createElement(J.a,{x:null===W||void 0===W?void 0:null===(y=W.data)||void 0===y?void 0:null===(h=y[P])||void 0===h?void 0:h.name,stroke:"#6B7280",strokeDasharray:"3 3",label:{value:"Today",position:"insideTopLeft",fill:"#6B7280"}}),o.a.createElement(G.a,{dataKey:"growthRate",name:"Growth Rate (%)",fill:e=>{const t=(e=>null===e?"#cccccc":e>=15?"#10B981":e>=5?"#60A5FA":e>=0?"#FBBF24":"#EF4444")(e.growthRate);return e.projected,t},opacity:e=>e.projected?.6:1,radius:[4,4,0,0]})))),o.a.createElement(d.a,{sx:{display:"flex",justifyContent:"space-between",mt:2,pt:2,borderTop:"1px dashed #CBD5E1",color:"#64748B",fontSize:"0.875rem"}},o.a.createElement(d.a,{sx:{display:"flex",alignItems:"center"}},o.a.createElement(d.a,{sx:{width:12,height:12,backgroundColor:"#10B981",borderRadius:1,mr:1}}),o.a.createElement(u.a,{variant:"body2"},"Historical Growth Rate")),o.a.createElement(d.a,{sx:{display:"flex",alignItems:"center"}},o.a.createElement(d.a,{sx:{width:12,height:12,backgroundColor:"#10B981",borderRadius:1,opacity:.6,mr:1}}),o.a.createElement(u.a,{variant:"body2"},"Projected Growth Rate")))),o.a.createElement(g.a,{sx:{borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(d.a,{sx:{p:3,display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",borderBottom:B?"1px solid #E5E7EB":"none","&:hover":{backgroundColor:"#F9FAFB"}},onClick:()=>R(!B)},o.a.createElement(u.a,{variant:"h6",sx:{fontWeight:"medium"}},"Quarterly Data Table"),o.a.createElement($.a,{size:"small"},B?o.a.createElement(V.a,null):o.a.createElement(X.a,null))),o.a.createElement(Y.a,{in:B},o.a.createElement(d.a,{sx:{p:3,overflowX:"auto"}},o.a.createElement("table",{style:{minWidth:"100%",borderCollapse:"separate",borderSpacing:0,fontSize:"0.875rem"}},o.a.createElement("thead",null,o.a.createElement("tr",{style:{backgroundColor:"#F9FAFB"}},o.a.createElement("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"medium",color:"#4B5563",borderBottom:"1px solid #E5E7EB"}},"Quarter"),o.a.createElement("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"medium",color:"#4B5563",borderBottom:"1px solid #E5E7EB"}},"Orders"),o.a.createElement("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"medium",color:"#4B5563",borderBottom:"1px solid #E5E7EB"}},"Growth Rate"),o.a.createElement("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"medium",color:"#4B5563",borderBottom:"1px solid #E5E7EB"}},"Status"))),o.a.createElement("tbody",null,null===W||void 0===W?void 0:null===(x=W.data)||void 0===x?void 0:x.map((e,t)=>o.a.createElement("tr",{key:t,style:{backgroundColor:e.projected?"#F9FAFB":"white"}},o.a.createElement("td",{style:{padding:"12px 16px",fontWeight:"medium",color:"#111827",borderBottom:"1px solid #E5E7EB"}},e.name,e.projected&&o.a.createElement("span",{style:{marginLeft:"8px",fontSize:"0.75rem",color:"#64748B"}},"(Projected)")),o.a.createElement("td",{style:{padding:"12px 16px",color:"#4B5563",borderBottom:"1px solid #E5E7EB"}},e.value.toLocaleString()),o.a.createElement("td",{style:{padding:"12px 16px",fontWeight:"medium",color:null===e.growthRate?"#9CA3AF":e.growthRate>=15?"#059669":e.growthRate>=5?"#2563EB":e.growthRate>=0?"#D97706":"#DC2626",borderBottom:"1px solid #E5E7EB",opacity:e.projected?.8:1}},null===e.growthRate?"N/A":`${e.growthRate>=0?"+":""}${e.growthRate}%`),o.a.createElement("td",{style:{padding:"12px 16px",color:"#4B5563",borderBottom:"1px solid #E5E7EB"}},e.projected?"Projected":"Historical")))))))))},U=a(719),H=a(715);const Z={LYGRRATQ7EGG2:"London",L4NE8GPX89J3A:"Ottawa",LDK6Z980JTKXY:"Kitchener-Waterloo",LXMC6DWVJ5N7W:"Hamilton",LG0VGFKQ25XED:"Calgary",all:"All Cities"},q={LYGRRATQ7EGG2:"#FF0000",L4NE8GPX89J3A:"#00FF00",LDK6Z980JTKXY:"#0000FF",LXMC6DWVJ5N7W:"#FFA500",LG0VGFKQ25XED:"#800080"},ee={LYGRRATQ7EGG2:{lat:42.9849,lng:-81.2453},L4NE8GPX89J3A:{lat:45.4215,lng:-75.6972},LDK6Z980JTKXY:{lat:43.4643,lng:-80.5204},LXMC6DWVJ5N7W:{lat:43.2557,lng:-79.8711},LG0VGFKQ25XED:{lat:51.0447,lng:-114.0719}},te={"Tommy Suds":{lat:42.9727,lng:-81.278,city:"LYGRRATQ7EGG2",address:"79 Commissioners Rd W, London, ON N6J 4H9"},"London Sudz":{lat:42.9815,lng:-81.235,city:"LYGRRATQ7EGG2",address:"123 Dundas St, London, ON"},"Royal City Cleaners":{lat:43.0046,lng:-81.278,city:"LYGRRATQ7EGG2",address:"456 Oxford St, London, ON"},Browns:{lat:45.3494,lng:-75.7395,city:"L4NE8GPX89J3A",address:"1642 Merivale Rd, Nepean, ON K2G 4A1"},"Ace Cleaners":{lat:45.2959,lng:-75.9077,city:"L4NE8GPX89J3A",address:"471 Hazeldean Rd, Ottawa, ON K2L 4B8"},Khawla:{lat:45.3103,lng:-75.6104,city:"L4NE8GPX89J3A",address:"585 Flagstaff Drive, Ottawa, ON"},Spins:{lat:45.4372,lng:-75.6556,city:"L4NE8GPX89J3A",address:"320 McArthur Ave. B, Vanier, ON K1L 5G2"},"Centreville Laundry":{lat:43.4404,lng:-80.4469,city:"LDK6Z980JTKXY",address:"1077 Weber St E Unit #1, Kitchener, ON N2A 3Y5"},"KW Washateria":{lat:43.4723,lng:-80.5449,city:"LDK6Z980JTKXY",address:"321 University Ave, Waterloo, ON"},"Laundry Closet":{lat:43.2356,lng:-79.8187,city:"LXMC6DWVJ5N7W",address:"273 Kenilworth Ave N, Hamilton, ON L8H 4S8"},"Soapy Bubbles":{lat:43.2526,lng:-79.8439,city:"LXMC6DWVJ5N7W",address:"750 Main St E, Hamilton, ON L8M 1L1"},Marbank:{lat:51.0714,lng:-113.9826,city:"LG0VGFKQ25XED",address:"920 36 St NE #139, Calgary, AB T2A 6L8"},"Calgary Cleaners":{lat:51.0447,lng:-114.0719,city:"LG0VGFKQ25XED",address:"555 Centre St, Calgary, AB"}},ae={LYGRRATQ7EGG2:["Tommy Suds","London Sudz","Royal City Cleaners"],L4NE8GPX89J3A:["Browns","Ace Cleaners","Khawla","Spins"],LDK6Z980JTKXY:["Centreville Laundry","KW Washateria"],LXMC6DWVJ5N7W:["Laundry Closet","Soapy Bubbles"],LG0VGFKQ25XED:["Marbank","Calgary Cleaners"]},re={};Object.keys(ee).forEach(e=>{re[e]=[],(ae[e]||[]).forEach((t,a)=>{var r;const o=`${e.substring(0,5)}_${t.replace(/\s+/g,"_")}`;re[e].push({id:o,name:t,address:(null===(r=te[t])||void 0===r?void 0:r.address)||`Unknown Address in ${Z[e]}`})});const t=5-re[e].length;if(t>0)for(let a=0;a<t;a++){const t=Z[e],r=["Cleaners","Laundry","Wash & Fold","Express Wash","Laundromat"],o=`${t} ${r[a%r.length]} ${a+1}`,n=`${e.substring(0,5)}_LAUNDRY_${a+1}`;re[e].push({id:n,name:o,address:`123 Main St, ${t}`})}});const oe=e=>{if(!e)return!1;try{const a=Object(U.a)(e),r=new Date;return a.getMonth()===r.getMonth()&&a.getFullYear()===r.getFullYear()}catch(t){return!1}},ne=e=>{const t=e.cityId||e.city_id||e.city;if(t&&ee[t])return t;const a=e.city||e.cityName;if(a)for(const[r,o]of Object.entries(Z))if(o.toLowerCase()===a.toLowerCase())return r;return"LYGRRATQ7EGG2"};var le=a(721);const ce={LYGRRATQ7EGG2:"London",L4NE8GPX89J3A:"Ottawa",LDK6Z980JTKXY:"Kitchener-Waterloo",LXMC6DWVJ5N7W:"Hamilton",LG0VGFKQ25XED:"Calgary",all:"All Cities"},se={LYGRRATQ7EGG2:{name:"London",population:4e5,yearlyGrowthFactor:1.35,operationalSince:new Date("2022-12-01"),marketMaturity:.15,minWeeklyOrders:80},L4NE8GPX89J3A:{name:"Ottawa",population:105e4,yearlyGrowthFactor:1.28,operationalSince:new Date("2023-03-15"),marketMaturity:.35,minWeeklyOrders:35},LDK6Z980JTKXY:{name:"Kitchener-Waterloo",population:575e3,yearlyGrowthFactor:1.32,operationalSince:new Date("2023-06-01"),marketMaturity:.3,minWeeklyOrders:40},LXMC6DWVJ5N7W:{name:"Hamilton",population:57e4,yearlyGrowthFactor:1.25,operationalSince:new Date("2023-09-10"),marketMaturity:.35,minWeeklyOrders:30},LG0VGFKQ25XED:{name:"Calgary",population:13e5,yearlyGrowthFactor:1.4,operationalSince:new Date("2023-11-20"),marketMaturity:.2,minWeeklyOrders:25}},ie={0:.98,1:1,2:1.05,3:1.08,4:.95},de={0:.95,1:.98,2:1.02,3:1.05,4:1.08,5:1.12,6:1.1,7:1.05,8:1.1,9:1.05,10:1,11:.98};function me(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:52;if(!e||0===e.length)return{combined:[],metrics:{totalAnnualOrders:0,averageMonthlyOrders:0,projectedGrowthPercent:0}};const r=function(e,t){if(!e||0===e.length)return[];const a=ce[t]||t;return e.filter(e=>"all"===t?void 0!==e.total||Object.values(ce).filter(e=>"All Cities"!==e).some(t=>void 0!==e[t]):void 0!==e[a]).map(e=>{let r;return r="all"===t?void 0!==e.total?e.total:Object.values(ce).filter(e=>"All Cities"!==e).reduce((t,a)=>t+(e[a]||0),0):e[a]||0,{name:e.name,orders:r,month:e.month||null,date:e.date||null}}).filter(e=>e.orders>0)}(e,t),o=new Date(2024,9,31),n=r.filter(e=>{let t;try{const r=e.name.split(" "),o=r[0],n=parseInt(r[1]),l={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};void 0===l[o]||isNaN(n)||(t=new Date(n,l[o],1))}catch(a){console.error("Error parsing date from month name:",e.name,a)}return!t||t<=o}),l=n.length>0?n[n.length-1]:r[r.length-1];if(!l)return{combined:[],metrics:{totalAnnualOrders:0,averageMonthlyOrders:0,projectedGrowthPercent:0}};const c="all"!==t?se[t]:{name:"All Cities",yearlyGrowthFactor:1.28,marketMaturity:.25,minWeeklyOrders:85};let s,i=l.orders/4.3;if(i=Math.max(i,c.minWeeklyOrders||20),n.length>=3){const e=n.map(e=>e.orders);s=e.reduce((e,t)=>e+t,0)/e.length/4.3,s=Math.max(s,c.minWeeklyOrders||20)}else s=i;const[d,m]=l.name.split(" "),u={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[d],p=parseInt(m);new Date(p,u,15);new Date;const g=c.yearlyGrowthFactor||1.28,E=Math.pow(g,1/52)*(1-.15*(c.marketMaturity||.25)),y=[];let h=i,x=new Date;for(let F=0;F<a;F++){const e=Object(le.a)(x,F),t=Math.floor(e.getDate()/7),a=e.getMonth();h*=E,h*=(ie[t]||1)*(de[a]||1),h*=.03*Math.random()-.015+1,h=Math.max(h,c.minWeeklyOrders||20);const r=Object(I.a)(e,"MMM d, yyyy"),o=Object(I.a)(e,"MMM d");y.push({name:o,fullname:r,orders:Math.round(h),projected:!0,month:Object(I.a)(e,"yyyy-MM"),week:Object(I.a)(e,"yyyy-MM-dd")})}const b=function(e){if(!e||e.length<2)return e;const t=[];for(let a=0;a<e.length;a++){const r=e[a],o=r.name.split(" "),n=o[0],l=parseInt(o[1]),c={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};if(void 0===c[n]||isNaN(l)){t.push(r);continue}const s=c[n],i=(new Date(l,s,1),new Date(l,s+1,0).getDate()),d=Math.ceil(i/7),m=e[a+1];let u=r.orders;m&&(u=m.orders);for(let p=0;p<d;p++){const o=Math.min(7*p+1,i),n=new Date(l,s,o),c=p/d;let m;if(a<e.length-1)m=r.orders*(1-c)+u*c;else{const e=1+.1*(c-.5);m=r.orders*e}const g=ie[p]||1;m*=g;const E=.04*Math.random()-.02+1;m*=E;const y=Object(I.a)(n,"MMM d"),h=Object(I.a)(n,"MMM d, yyyy");t.push({name:y,fullname:h,orders:Math.round(m/d),month:Object(I.a)(n,"yyyy-MM"),week:Object(I.a)(n,"yyyy-MM-dd"),projected:!1})}}return t}(r),f=y.reduce((e,t)=>e+t.orders,0),v=f/4.3,k=f/y.length,w=100*(k/s-1);return{combined:[...b.map(e=>({...e,projected:!1})),...y],weeklyHistoricalData:b,projectedData:y,metrics:{totalAnnualOrders:Math.round(12*v),averageMonthlyOrders:Math.round(4.3*k),averageWeeklyOrders:Math.round(k),projectedGrowthPercent:w,cityName:ce[t]||"Unknown"}}}a(700);const ue=["#1E88E5","#26A69A","#FFA726","#EF5350","#AB47BC","#66BB6A","#EC407A"];var pe=()=>{const[e,t]=Object(r.useState)(!0),[a,n]=Object(r.useState)([]),[l,c]=Object(r.useState)("LYGRRATQ7EGG2"),[s,i]=Object(r.useState)(Object(N.a)(new Date,12)),[p,J]=Object(r.useState)(new Date),[$,Y]=Object(r.useState)([]),[Q,X]=Object(r.useState)([]),[z,V]=Object(r.useState)("all"),[ae,le]=Object(r.useState)("all"),[ce,se]=Object(r.useState)(null),[ie,de]=Object(r.useState)(11),[pe,ge]=Object(r.useState)(null),[Ee,ye]=Object(r.useState)(null),he=Object(r.useMemo)(()=>{const e={},t={};Object.keys(re).forEach(e=>{re[e].forEach(e=>{t[e.address]=e.name})});const r={};return a.forEach(e=>{if(e.cleaning&&e.cleaning.cleaner&&e.pickup&&e.pickup.to){const t=e.cleaning.cleaner,a=e.pickup.to;r[t]||(r[t]={}),r[t][a]=(r[t][a]||0)+1}}),Object.keys(r).forEach(o=>{const n=r[o];let l=null,c=0;if(Object.keys(n).forEach(e=>{n[e]>c&&(l=e,c=n[e])}),l&&t[l])return void(e[o]=t[l]);let s=null,i=0;if(Object.keys(t).forEach(e=>{const a=e.toLowerCase().split(/[,\s]+/),r=l?l.toLowerCase().split(/[,\s]+/):[];let o=0;r.forEach(e=>{e.length>2&&a.includes(e)&&o++});const n=o/Math.max(a.length,r.length);n>i&&(i=n,s=t[e])}),s&&i>.3)e[o]=s;else{const t={};a.forEach(e=>{e.cleaning&&e.cleaning.cleaner===o&&e.cityId&&(t[e.cityId]=(t[e.cityId]||0)+1)});let n=null,l=0;if(Object.keys(t).forEach(e=>{t[e]>l&&(l=t[e],n=e)}),n&&re[n]&&re[n].length>0){const t=Object.keys(r).indexOf(o)%re[n].length;e[o]=re[n][t].name}else e[o]=`Laundromat ${o.substring(0,8)}`}}),e.q8dvkNhc9ZbCswGUbllUdoqOr6J3="Tommy Suds",e.Z1qpZ7LByNWjT4QmjxZdCgEQogH3="London Sudz",e.yXwnUIE3EPX1sSfpot3rw5MbbVs1="Royal City Cleaners",e.hchYpbQECAQk2e2eyruUTxU8YP42="Browns",e},[a]);Object(r.useEffect)(()=>{(async()=>{try{console.log("Attempting to fetch data...");const o=await fetch("/appointments.json");if(console.log("Response status:",o.status),!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json();if(console.log("Data loaded successfully, total records:",l.length),l.length>0){var e;const t=l[0];console.log("Sample record:",t),console.log("Date fields found:",{serviceDate:null===(e=t.pickup)||void 0===e?void 0:e.serviceDate,service_date:t.service_date,createdAt:t.createdAt,updatedAt:t.updatedAt})}try{const e=l.map(e=>{try{var t;const r=(null===(t=e.pickup)||void 0===t?void 0:t.serviceDate)||e.service_date||e.createdAt||e.updatedAt;if(!r)return null;const o=new Date(r);return isNaN(o.getTime())?null:o}catch(a){return null}}).filter(e=>null!==e);if(e.length>0){const t=new Date(Math.min(...e.map(e=>e.getTime()))),a=new Date(Math.max(...e.map(e=>e.getTime())));console.log("Date range:",{earliest:t.toISOString(),latest:a.toISOString()}),t<s&&i(t),a<p&&J(a)}else console.log("No valid dates found in the data")}catch(a){console.error("Error calculating date range:",a)}n(l),t(!1)}catch(r){console.error("Error fetching data:",r),console.log("Trying fallback data...");const e=Array.from({length:50},(e,t)=>({id:`sample-${t}`,city_id:"LYGRRATQ7EGG2",customer_type:t%2===0?"Residential":"Commercial",laundromat_id:"LYGRRATQ7EGG"+Math.floor(t/10),laundromat_name:`Laundromat ${Math.floor(t/10)}`,revenue:20+80*Math.random(),address:`${100+t} Richmond St, London, Ontario`,pickup:{serviceDate:new Date(2023,9,t%30+1).toISOString()}}));console.log("Using fallback data:",e.length,"records"),n(e),t(!1)}})()},[]),Object(r.useEffect)(()=>{console.log("City changed to:",l,"Setting map center:",ee[l]),"all"===l?(se(ee.LYGRRATQ7EGG2),de(8)):(se(ee[l]),de(11))},[l]),Object(r.useEffect)(()=>{pe&&ce&&(console.log("Panning map to:",ce,"with zoom:",ie),pe.panTo(ce),pe.setZoom(ie))},[ce,ie,pe]),Object(r.useEffect)(()=>{(async()=>{if(!a.length)return;console.log("MAP DEBUG - Total orders:",a.length);const e=a.reduce((e,t)=>{const a=ne(t);return e[a]=(e[a]||0)+1,e},{});if(console.log("MAP DEBUG - Orders by city:",e),console.log("MAP DEBUG - Currently selected city:",l),a.length>0){const e=a[0];console.log("MAP DEBUG - Sample appointment:",{id:e.id||e.appointmentId,cityId:e.cityId,city_id:e.city_id,city:e.city,normalizedCityId:ne(e)})}const t="all"===l?a:a.filter(e=>{const t=ne(e),r=t===l;return a.indexOf(e)<5&&console.log(`MAP DEBUG - App ${e.id||e.appointmentId}: cityId=${e.cityId}, normalizedCityId=${t}, matches=${r}`),r});console.log(`MAP DEBUG - After filtering, ${t.length} appointments match the selected city`);const r=await(async e=>{const t={},a=new Set;e.forEach(e=>{const t=ne(e);t&&a.add(t)}),console.log("MAP DEBUG - getLaundromatLocations - City IDs:",Array.from(a)),0===a.size&&(Object.keys(ee).forEach(e=>a.add(e)),console.log("MAP DEBUG - No city IDs found, using all cities")),Array.from(a).forEach(e=>{re[e]&&(t[e]=re[e].map(t=>({id:t.id,name:t.name,address:t.address,color:q[e]||"#000000",orders:[],cityId:e})))}),e.forEach(e=>{const a=ne(e);if(e.laundromat_id||e.laundromatId,!a||!t[a])return;const r=Math.floor(Math.random()*t[a].length);t[a][r].orders.push(e)});const r=Object.values(t).flat();return console.log(`MAP DEBUG - getLaundromatLocations - Generated ${r.length} laundromat locations`),r.map(e=>{const t=e.cityId,a=ee[t]||ee.LYGRRATQ7EGG2,r=te[e.name];if(r&&r.city===t)return{...e,lat:r.lat,lng:r.lng};const o=Math.random()*Math.PI*2,n=.01+.02*Math.random(),l=a.lat+Math.cos(o)*n,c=a.lng+Math.sin(o)*n;return{...e,lat:l,lng:c}})})(t);console.log("MAP DEBUG - Laundromat locations:",r),X(r);const o=await(async e=>{console.log(`MAP DEBUG - getOrderLocations - Starting with ${e.length} appointments`);const t=e.reduce((e,t)=>{const a=ne(t);return e[a]=(e[a]||0)+1,e},{});console.log("MAP DEBUG - getOrderLocations - City distribution:",t);const a=Math.min(e.length,500),r=e.slice(0,a),o=new Set;r.forEach(e=>{const t=ne(e);t&&o.add(t)}),console.log("MAP DEBUG - getOrderLocations - Unique cities in sample:",Array.from(o));const n={},l={};Array.from(o).forEach(e=>{re[e]&&re[e].forEach(t=>{n[t.id]={name:t.name,address:t.address,cityId:e,color:q[e]||"#000000"},l[t.name]={id:t.id,address:t.address,cityId:e,color:q[e]||"#000000"}})});const c=r.map(e=>{var t;const a=ne(e),r=ee[a]||ee.LYGRRATQ7EGG2;let o=e.laundromat_id||e.laundromatId,l=null;if(!o&&re[a]){const e=Math.floor(Math.random()*re[a].length);o=re[a][e].id,l=re[a][e].name}else o&&n[o]&&(l=n[o].name);const c=(null===(t=n[o])||void 0===t?void 0:t.color)||q[a]||"#000000";let s,i;const d=l?te[l]:null;if(d){const e=.005+.01*Math.random(),t=Math.random()*Math.PI*2;s=d.lat+Math.cos(t)*e,i=d.lng+Math.sin(t)*e}else{const e=.01+.02*Math.random(),t=Math.random()*Math.PI*2;s=r.lat+Math.cos(t)*e,i=r.lng+Math.sin(t)*e}return{lat:s,lng:i,laundromatColor:c,cityId:a,orderDetails:{customerType:e.customerType||e.customer_type||"Unknown",revenue:parseFloat(e.revenue||e.invoiceTotal||0),address:e.address||(e.pickup?e.pickup.to:"Unknown Address"),laundromatId:o,laundromatName:l,city:Z[a]||"Unknown"}}});return console.log(`MAP DEBUG - getOrderLocations - Generated ${c.length} order markers`),c})(t);console.log("MAP DEBUG - Order locations:",o),Y(o)})()},[a,l]);Object(r.useMemo)(()=>{const e=[],t=new Date,a=new Date(t.getFullYear(),t.getMonth()-1,1);for(let r=0;r<24;r++){const t=new Date(a.getFullYear(),a.getMonth()-r,1);e.push({value:{month:t.getMonth(),year:t.getFullYear()},label:t.toLocaleString("default",{month:"long",year:"numeric"})})}return e},[]);const xe=Object(r.useMemo)(()=>{console.log("Filtering appointments with:",{totalAppointments:a.length,selectedCity:l,startDate:s.toISOString(),endDate:p.toISOString(),customerTypeFilter:z,sampleAppointment:a[0]});const e=a.filter(e=>{var t;if(e.id===(null===(t=a[0])||void 0===t?void 0:t.id)&&console.log("Sample appointment structure:",e),"all"!==l&&e.cityId!==l)return!1;if("all"!==z&&e.customerType!==z)return!1;if("all"!==ae&&(!e.cleaning||e.cleaning.cleaner!==ae))return!1;let r=!1,o=!1;if(e.pickup&&e.pickup.serviceDate){o=!0;try{var n,c;const t=new Date(e.pickup.serviceDate);e.id!==(null===(n=a[0])||void 0===n?void 0:n.id)&&e.appointmentId!==(null===(c=a[0])||void 0===c?void 0:c.appointmentId)||(console.log("Parsed pickup date:",t),console.log("Start date:",s),console.log("End date:",p),console.log("Is in range:",!(t<s||t>p))),t<s||t>p||(r=!0)}catch(i){console.error("Error parsing date:",e.pickup.serviceDate,i)}}if(!r&&e.service_date){o=!0;try{const t=new Date(e.service_date);t<s||t>p||(r=!0)}catch(i){console.error("Error parsing service_date:",e.service_date,i)}}if(!r&&e.createdAt){o=!0;try{const t=new Date(e.createdAt);t<s||t>p||(r=!0)}catch(i){console.error("Error parsing createdAt:",e.createdAt,i)}}return!(o&&!r)});return console.log("Filtered appointments:",e.length),e},[a,l,z,ae,s,p]),be=(Object(r.useMemo)(()=>(e=>{try{const a={};return Object.keys(Z).forEach(e=>{a[e]={id:e,name:Z[e],orders:0,revenue:0,avgOrderValue:0,customers:new Set,laundromats:new Set,customerTypes:{Residential:0,Commercial:0,Airbnb:0,Monthly:0}}}),e.forEach(e=>{const t=e.cityId;if(!a[t])return;a[t].orders+=1;const r=parseFloat(e.invoiceTotal||0);a[t].revenue+=isNaN(r)?0:r,e.customerId&&a[t].customers.add(e.customerId),e.cleaning&&e.cleaning.cleaner&&a[t].laundromats.add(e.cleaning.cleaner),e.customerType&&(a[t].customerTypes[e.customerType]=(a[t].customerTypes[e.customerType]||0)+1)}),Object.keys(a).forEach(e=>{const t=a[e];t.avgOrderValue=t.orders>0?t.revenue/t.orders:0,t.customers=t.customers.size,t.laundromats=t.laundromats.size}),Object.values(a)}catch(t){return console.error("Error calculating city statistics:",t),[]}})(xe),[xe]),Object(r.useMemo)(()=>(e=>{try{const a={},r={};return e.forEach(e=>{if(!e.cleaning||!e.cleaning.cleaner)return;const t=e.cleaning.cleaner,r=e.cityId;a[t]||(a[t]={id:t,city:Z[r]||"Unknown",cityId:r,orders:0,revenue:0,customers:new Set,returningCustomers:new Set,retentionRate:0,avgTurnaroundDays:0,turnaroundTimes:[],orderWeights:[],avgOrderWeight:0})}),e.forEach(e=>{if(!e.cleaning||!e.cleaning.cleaner||!e.customerId)return;const t=e.cleaning.cleaner,o=e.customerId;if(!a[t])return;a[t].orders+=1;const n=parseFloat(e.invoiceTotal||0);if(a[t].revenue+=isNaN(n)?0:n,a[t].customers.add(o),r[o]===t&&a[t].returningCustomers.add(o),r[o]=t,e.pickup&&e.pickup.serviceDate&&e.dropoff&&e.dropoff.serviceDate)try{const r=Object(U.a)(e.pickup.serviceDate),o=Object(U.a)(e.dropoff.serviceDate),n=Object(H.a)(o,r);n>=0&&n<=14&&a[t].turnaroundTimes.push(n)}catch(l){}if(e.cleaning&&e.cleaning.orderDetails){const r=parseFloat(e.cleaning.orderDetails.washFoldWeight||0);!isNaN(r)&&r>0&&a[t].orderWeights.push(r)}}),Object.keys(a).forEach(e=>{const t=a[e];t.retentionRate=t.customers.size>0?t.returningCustomers.size/t.customers.size:0,t.avgTurnaroundDays=t.turnaroundTimes.length>0?t.turnaroundTimes.reduce((e,t)=>e+t,0)/t.turnaroundTimes.length:0,t.avgOrderWeight=t.orderWeights.length>0?t.orderWeights.reduce((e,t)=>e+t,0)/t.orderWeights.length:0,t.customers=t.customers.size,t.returningCustomers=t.returningCustomers.size}),Object.values(a).filter(e=>e.orders>0)}catch(t){return console.error("Error calculating laundromat statistics:",t),[]}})(xe).map(e=>{const t=e.customers>0?e.returningCustomers/e.customers:0;return{...e,retentionRate:t}}),[xe])),fe=Object(r.useMemo)(()=>(e=>{try{const a={};return e.forEach(e=>{e.customerType&&(a[e.customerType]=(a[e.customerType]||0)+1)}),Object.entries(a).map(e=>{let[t,a]=e;return{name:t,value:a}})}catch(t){return console.error("Error calculating customer type distribution:",t),[]}})(xe),[xe]),ve=Object(r.useMemo)(()=>{const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;try{const r=new Date,o={};for(let e=0;e<t;e++){const t=Object(N.a)(r,e);if(t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear())continue;const a=Object(I.a)(t,"yyyy-MM"),n=Object(I.a)(t,"MMM yyyy");o[a]={name:n,month:a,date:t,total:0},Object.values(Z).forEach(e=>{o[a][e]=0})}return e.forEach(e=>{if(e.pickup&&e.pickup.serviceDate)try{const a=Object(U.a)(e.pickup.serviceDate);if(oe(e.pickup.serviceDate))return;const r=Object(I.a)(a,"yyyy-MM");if(!o[r])return;o[r].total+=1;const n=Z[e.cityId];n&&(o[r][n]=(o[r][n]||0)+1)}catch(t){}}),Object.values(o).sort((e,t)=>e.month.localeCompare(t.month))}catch(a){return console.error("Error calculating monthly order trend:",a),[]}}("all"===l?a:a.filter(e=>e.cityId===l),12),t=new Date;return e.filter(e=>{const a=new Date(e.date);return!(a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear())})},[a,l]),ke=Object(r.useMemo)(()=>{const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;try{const r=new Date,o={};for(let e=0;e<t;e++){const t=Object(N.a)(r,e);if(t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear())continue;const a=Object(I.a)(t,"yyyy-MM"),n=Object(I.a)(t,"MMM yyyy");o[a]={name:n,month:a,date:t,orderCount:0,totalRevenue:0,value:0}}return e.forEach(e=>{if(e.pickup&&e.pickup.serviceDate)try{const a=Object(U.a)(e.pickup.serviceDate);if(oe(e.pickup.serviceDate))return;const r=Object(I.a)(a,"yyyy-MM");if(!o[r])return;const n=parseFloat(e.invoiceTotal||0);!isNaN(n)&&n>0&&(o[r].orderCount+=1,o[r].totalRevenue+=n)}catch(t){}}),Object.values(o).forEach(e=>{e.value=e.orderCount>0?e.totalRevenue/e.orderCount:0}),Object.values(o).sort((e,t)=>e.month.localeCompare(t.month)).map(e=>{let{name:t,value:a,date:r}=e;return{name:t,value:parseFloat(a.toFixed(2)),date:r}})}catch(a){return console.error("Error calculating average order value trend:",a),[]}}("all"===l?a:a.filter(e=>e.cityId===l),12),t=new Date;return e.filter(e=>{const a=new Date(e.date);return!(a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear())})},[a,l]),we=(Object(r.useMemo)(()=>(e=>{try{const a={},r={},o={};e.forEach(e=>{if(!e.customerId||!e.pickup||!e.pickup.serviceDate)return;const t=e.customerId;try{const l=Object(U.a)(e.pickup.serviceDate);a[t]=(a[t]||0)+1,(!r[t]||l<r[t])&&(r[t]=l),(!o[t]||l>o[t])&&(o[t]=l)}catch(n){}});const n=Object.keys(a).length,l=Object.values(a).filter(e=>e>1).length,c=n>0?l/n:0,s=n>0?Object.values(a).reduce((e,t)=>e+t,0)/n:0;let i=0,d=0;return Object.keys(a).forEach(e=>{if(a[e]>1&&r[e]&&o[e]){const t=Object(H.a)(o[e],r[e]);t>0&&(i+=t,d++)}}),{totalCustomers:n,returningCustomers:l,retentionRate:c,averageOrdersPerCustomer:s,averageCustomerLifetime:d>0?i/d:0}}catch(t){return console.error("Error calculating customer retention metrics:",t),{totalCustomers:0,returningCustomers:0,retentionRate:0,averageOrdersPerCustomer:0,averageCustomerLifetime:0}}})(xe),[xe]),Object(r.useMemo)(()=>(e=>{try{const a={};return e.forEach(e=>{if(e.pickup&&e.pickup.driver){const t=e.pickup.driver;a[t]||(a[t]={id:t,totalPickups:0,totalDropoffs:0,totalDistance:0,totalPay:0,completedPickups:0,completedDropoffs:0,cancelledServices:0}),a[t].totalPickups++,"COMPLETED"===e.pickup.status?a[t].completedPickups++:"CANCELLED_BY_SELLER"===e.pickup.status&&a[t].cancelledServices++;const r=parseFloat(e.pickup.distance||0);isNaN(r)||(a[t].totalDistance+=r);const o=parseFloat(e.pickup.basePay||0);isNaN(o)||(a[t].totalPay+=o)}if(e.dropoff&&e.dropoff.driver){const t=e.dropoff.driver;a[t]||(a[t]={id:t,totalPickups:0,totalDropoffs:0,totalDistance:0,totalPay:0,completedPickups:0,completedDropoffs:0,cancelledServices:0}),a[t].totalDropoffs++,"COMPLETED"===e.dropoff.status?a[t].completedDropoffs++:"CANCELLED_BY_SELLER"===e.dropoff.status&&a[t].cancelledServices++;const r=parseFloat(e.dropoff.distance||0);isNaN(r)||(a[t].totalDistance+=r);const o=parseFloat(e.dropoff.basePay||0);isNaN(o)||(a[t].totalPay+=o)}}),Object.keys(a).forEach(e=>{const t=a[e];t.totalServices=t.totalPickups+t.totalDropoffs,t.completedServices=t.completedPickups+t.completedDropoffs,t.completionRate=t.totalServices>0?t.completedServices/t.totalServices:0,t.avgDistancePerService=t.totalServices>0?t.totalDistance/t.totalServices:0,t.avgPayPerDistance=t.totalDistance>0?t.totalPay/t.totalDistance:0}),Object.values(a)}catch(t){return console.error("Error calculating driver performance metrics:",t),[]}})(xe),[xe]),Object(r.useMemo)(()=>(e=>{try{const a={Q1:{name:"Q1 (Jan-Mar)",orders:0,revenue:0},Q2:{name:"Q2 (Apr-Jun)",orders:0,revenue:0},Q3:{name:"Q3 (Jul-Sep)",orders:0,revenue:0},Q4:{name:"Q4 (Oct-Dec)",orders:0,revenue:0}};return e.forEach(e=>{if(e.pickup&&e.pickup.serviceDate)try{const r=Object(U.a)(e.pickup.serviceDate).getMonth();let o;a[o=r<3?"Q1":r<6?"Q2":r<9?"Q3":"Q4"].orders++;const n=parseFloat(e.invoiceTotal||0);isNaN(n)||(a[o].revenue+=n)}catch(t){}}),Object.values(a)}catch(t){return console.error("Error calculating seasonal trends:",t),[]}})(xe),[xe]),Object(r.useMemo)(()=>(e=>{try{const a={"0-5kg":{range:"0-5kg",count:0},"6-10kg":{range:"6-10kg",count:0},"11-15kg":{range:"11-15kg",count:0},"16-20kg":{range:"16-20kg",count:0},"21-30kg":{range:"21-30kg",count:0},"31kg+":{range:"31kg+",count:0}};return e.forEach(e=>{if(!e.cleaning||!e.cleaning.orderDetails||!e.cleaning.orderDetails.washFoldWeight)return;const t=parseFloat(e.cleaning.orderDetails.washFoldWeight);if(isNaN(t))return;let r;a[r=t<=5?"0-5kg":t<=10?"6-10kg":t<=15?"11-15kg":t<=20?"16-20kg":t<=30?"21-30kg":"31kg+"].count++}),Object.values(a)}catch(t){return console.error("Error calculating weight distribution:",t),[]}})(xe),[xe])),Fe=(Object(r.useMemo)(()=>a.filter(e=>"LYGRRATQ7EGG2"===e.cityId).map(e=>{let t="";return e.pickup&&e.pickup.to&&(t=e.pickup.to),{id:e.appointmentId,address:t,customerType:e.customerType||"Unknown",revenue:parseFloat(e.invoiceTotal||0)}}),[a]),Object(r.useMemo)(()=>({totalOrders:xe.length,totalRevenue:xe.reduce((e,t)=>{const a=parseFloat(t.invoiceTotal||0);return e+(isNaN(a)?0:a)},0),totalCustomers:new Set(xe.map(e=>e.customerId).filter(Boolean)).size,totalLaundromats:new Set(xe.filter(e=>e.cleaning&&e.cleaning.cleaner).map(e=>e.cleaning.cleaner)).size,avgOrderValue:xe.length>0?xe.reduce((e,t)=>{const a=parseFloat(t.invoiceTotal||0);return e+(isNaN(a)?0:a)},0)/xe.length:0,avgWeight:xe.filter(e=>e.cleaning&&e.cleaning.orderDetails&&e.cleaning.orderDetails.washFoldWeight).reduce((e,t,a,r)=>{const o=parseFloat(t.cleaning.orderDetails.washFoldWeight);return a===r.length-1?(e+o)/r.length:e+o},0)}),[xe])),Oe=Object(r.useMemo)(()=>{if(!a||0===a.length)return[];const e={};return a.forEach(t=>{if("all"!==l&&t.cityId!==l)return;let a=null;if(t.pickup&&t.pickup.serviceDate?a=new Date(t.pickup.serviceDate):t.service_date?a=new Date(t.service_date):t.createdAt&&(a=new Date(t.createdAt)),a&&!isNaN(a.getTime())){const r=Object(I.a)(a,"yyyy-MM"),o=Object(I.a)(a,"MMM yyyy");e[r]||(e[r]={key:r,name:o,date:a,appointments:[],customers:new Set,returningCustomers:new Set}),e[r].appointments.push(t),t.customerId&&(e[r].customers.add(t.customerId),Object.keys(e).filter(t=>t!==r&&new Date(e[t].date)<a).some(a=>e[a].customers.has(t.customerId))&&e[r].returningCustomers.add(t.customerId))}}),Object.values(e).map(e=>({name:e.name,date:e.date,month:e.key,customers:e.customers.size,returningCustomers:e.returningCustomers.size,retentionRate:e.customers.size>0?e.returningCustomers.size/e.customers.size:0})).sort((e,t)=>new Date(e.date)-new Date(t.date)).filter(e=>e.customers>=3)},[a,l]),De=Object(r.useMemo)(()=>{if(!a||0===a.length)return[];const e={};return a.forEach(t=>{if("all"!==l&&t.cityId!==l)return;let a=null;if(t.pickup&&t.pickup.serviceDate?a=new Date(t.pickup.serviceDate):t.service_date?a=new Date(t.service_date):t.createdAt&&(a=new Date(t.createdAt)),a&&!isNaN(a.getTime())){const r=Object(I.a)(a,"yyyy-ww"),o=Object(I.a)(a,"MMM d, yyyy");e[r]||(e[r]={key:r,name:`Week of ${o}`,shortName:Object(I.a)(a,"MMM d"),date:a,customerCount:new Set,orderCount:0}),e[r].orderCount++,t.customerId&&e[r].customerCount.add(t.customerId)}}),Object.values(e).map(e=>({name:e.shortName,fullName:e.name,date:e.date,week:e.key,customers:e.customerCount.size,orders:e.orderCount,ordersPerCustomer:e.customerCount.size>0?e.orderCount/e.customerCount.size:0})).sort((e,t)=>new Date(e.date)-new Date(t.date)).filter(e=>e.customers>=2)},[a,l]),Ce=Object(r.useMemo)(()=>{if(!a||0===a.length)return[];const e={};return a.forEach(t=>{if("all"!==l&&t.cityId!==l)return;let a=null,r=null;if(t.pickup&&t.pickup.serviceDate&&(a=new Date(t.pickup.serviceDate)),t.delivery&&t.delivery.serviceDate&&(r=new Date(t.delivery.serviceDate)),a&&r&&!isNaN(a.getTime())&&!isNaN(r.getTime())&&r>a){const t=Object(I.a)(a,"yyyy-MM"),o=Object(I.a)(a,"MMM yyyy");e[t]||(e[t]={key:t,name:o,date:a,totalHours:0,count:0});const n=(r-a)/36e5;e[t].totalHours+=n,e[t].count++}}),Object.values(e).map(e=>({name:e.name,date:e.date,month:e.key,avgProcessingHours:e.count>0?e.totalHours/e.count:0})).sort((e,t)=>new Date(e.date)-new Date(t.date)).filter(e=>e.avgProcessingHours>0)},[a,l]),Me=Object(r.useMemo)(()=>{if(!a||0===a.length)return[];const e={};return a.forEach(t=>{if("all"!==l&&t.cityId!==l)return;let a=null;if(t.pickup&&t.pickup.serviceDate?a=new Date(t.pickup.serviceDate):t.service_date?a=new Date(t.service_date):t.createdAt&&(a=new Date(t.createdAt)),a&&!isNaN(a.getTime())){const r=Object(I.a)(a,"yyyy-MM"),o=Object(I.a)(a,"MMM yyyy");e[r]||(e[r]={key:r,name:o,date:a,residential:0,commercial:0,unknown:0,total:0}),e[r].total++,"Residential"===t.customerType?e[r].residential++:"Commercial"===t.customerType?e[r].commercial++:e[r].unknown++}}),Object.values(e).map(e=>({name:e.name,date:e.date,month:e.key,residential:e.residential,residentialPercent:e.total>0?e.residential/e.total*100:0,commercial:e.commercial,commercialPercent:e.total>0?e.commercial/e.total*100:0,unknown:e.unknown,total:e.total})).sort((e,t)=>new Date(e.date)-new Date(t.date)).filter(e=>e.total>=5)},[a,l]),[Se,Ae]=Object(r.useState)("retention"),je=Object(r.useMemo)(()=>{const e=new Set;return a.forEach(t=>{t.customerType&&e.add(t.customerType)}),Array.from(e)},[a]),Be=Object(r.useMemo)(()=>{const e=new Map;return a.forEach(t=>{if(t.cleaning&&t.cleaning.cleaner){const a=t.cleaning.cleaner,r=he[a]||`Laundromat ${a.substring(0,8)}`;e.set(a,{id:a,name:r})}}),Array.from(e.values())},[a,he]),Re=Object(r.useMemo)(()=>{const e={LYGRRATQ7EGG2:{lat:42.9849,lng:-81.2453},L4NE8GPX89J3A:{lat:45.4215,lng:-75.6972},LDK6Z980JTKXY:{lat:43.4643,lng:-80.5204},LXMC6DWVJ5N7W:{lat:43.2557,lng:-79.8711},LG0VGFKQ25XED:{lat:51.0447,lng:-114.0719}};return"all"!==l?e[l]:e.LYGRRATQ7EGG2},[l]),[Le,Ge]=(Object(r.useMemo)(()=>$.length,[$]),Object(r.useMemo)(()=>Q.length,[Q]),Object(r.useState)("orders")),[Te,We]=Object(r.useState)("desc"),Ne=e=>{Le===e?We("asc"===Te?"desc":"asc"):(Ge(e),We("desc"))},Ie=e=>{let{column:t}=e;return Le!==t?o.a.createElement("span",{style:{opacity:.3}},"\u2195"):o.a.createElement("span",null,"asc"===Te?"\u2191":"\u2193")},Pe=Object(r.useMemo)(()=>{const e={LYGRRATQ7EGG2:{name:"London",population:4e5,laundromatCount:3,operationalSince:"2023-01-01",marketShare:Fe.totalOrders/4e5*100,avgOrderFrequency:Fe.totalOrders/Fe.totalCustomers},L4NE8GPX89J3A:{name:"Ottawa",population:1017449,laundromatCount:5,operationalSince:"2023-03-15",marketShare:Fe.totalOrders/1017449*100,avgOrderFrequency:Fe.totalOrders/Fe.totalCustomers},LDK6Z980JTKXY:{name:"Kitchener-Waterloo",population:575847,laundromatCount:4,operationalSince:"2023-06-01",marketShare:Fe.totalOrders/575847*100,avgOrderFrequency:Fe.totalOrders/Fe.totalCustomers},LXMC6DWVJ5N7W:{name:"Hamilton",population:569353,laundromatCount:3,operationalSince:"2023-09-10",marketShare:Fe.totalOrders/569353*100,avgOrderFrequency:Fe.totalOrders/Fe.totalCustomers},LG0VGFKQ25XED:{name:"Calgary",population:1306784,laundromatCount:4,operationalSince:"2023-11-20",marketShare:Fe.totalOrders/1306784*100,avgOrderFrequency:Fe.totalOrders/Fe.totalCustomers}};return"all"===l?null:e[l]},[l,Fe]),Ke=Object(r.useMemo)(()=>{try{return ve&&0!==ve.length?function(e,t){try{const r=me(e,t);return{combinedOrderTrend:r.combined,weeklyHistoricalData:r.weeklyHistoricalData,projectedData:r.projectedData,metrics:r.metrics,referenceDate:Object(I.a)(new Date,"MMM d")}}catch(a){return console.error("Error generating projections:",a),{combinedOrderTrend:[],weeklyHistoricalData:[],projectedData:[],metrics:{totalAnnualOrders:0,averageMonthlyOrders:0,projectedGrowthPercent:0},referenceDate:Object(I.a)(new Date,"MMM d")}}}(ve,l):{combinedOrderTrend:[],metrics:{totalAnnualOrders:0,averageMonthlyOrders:0,projectedGrowthPercent:0}}}catch(e){return console.error("Error generating projections:",e),{combinedOrderTrend:ve,metrics:{totalAnnualOrders:0,averageMonthlyOrders:0,projectedGrowthPercent:0},error:!0}}},[ve,l]);Object(r.useMemo)(()=>{if(!ve||!Ke||"all"===l)return ve;const e={};return ve.forEach(t=>{e[t.month]=t}),[...ve,...(Ke.projectedData||[]).filter(t=>!e[t.month])].sort((e,t)=>e.month&&t.month?e.month.localeCompare(t.month):0)},[ve,Ke,l]);if(e)return o.a.createElement(d.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},o.a.createElement(m.a,null));return o.a.createElement(d.a,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"}},o.a.createElement(E.a,{position:"static",sx:{backgroundColor:"#1E40AF"}},o.a.createElement(y.a,null,o.a.createElement(u.a,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:"bold"}},"Laundry Service Analytics Dashboard"),o.a.createElement(d.a,{sx:{display:"flex",gap:2,flexWrap:"wrap"}},o.a.createElement(h.a,{variant:"filled",size:"small",sx:{minWidth:150,backgroundColor:"white",borderRadius:"4px",mr:2}},o.a.createElement(x.a,{value:l,onChange:e=>c(e.target.value),displayEmpty:!0,sx:{color:"#1E3A8A",".MuiSelect-select":{py:1.5,pr:8},"&:focus":{backgroundColor:"white"}},IconComponent:()=>o.a.createElement(K.a,{sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"#1E3A8A"}},"expand_more")},o.a.createElement(b.a,{value:"all"},"All Cities"),o.a.createElement(b.a,{value:"LYGRRATQ7EGG2"},"London"),o.a.createElement(b.a,{value:"L4NE8GPX89J3A"},"Ottawa"),o.a.createElement(b.a,{value:"LDK6Z980JTKXY"},"Kitchener-Waterloo"),o.a.createElement(b.a,{value:"LXMC6DWVJ5N7W"},"Hamilton"),o.a.createElement(b.a,{value:"LG0VGFKQ25XED"},"Calgary"))),o.a.createElement(h.a,{variant:"filled",size:"small",sx:{minWidth:120,backgroundColor:"white",borderRadius:"4px",mr:2}},o.a.createElement(x.a,{value:`${s.getFullYear()}-${s.getMonth()+1}`,onChange:e=>{const[t,a]=e.target.value.split("-");i(new Date(t,a-1,1))},displayEmpty:!0,sx:{color:"#1E3A8A",".MuiSelect-select":{py:1.5,pr:8},"&:focus":{backgroundColor:"white"}},IconComponent:()=>o.a.createElement(K.a,{sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"#1E3A8A"}},"expand_more")},[...Array(24)].map((e,t)=>{const a=Object(N.a)(new Date,t),r=`${a.getFullYear()}-${a.getMonth()+1}`,n=Object(I.a)(a,"MMM yyyy");return o.a.createElement(b.a,{key:`from-${r}`,value:r},n)}))),o.a.createElement(h.a,{variant:"filled",size:"small",sx:{minWidth:120,backgroundColor:"white",borderRadius:"4px",mr:2}},o.a.createElement(x.a,{value:`${p.getFullYear()}-${p.getMonth()+1}`,onChange:e=>{const[t,a]=e.target.value.split("-");J(new Date(t,a,0))},displayEmpty:!0,sx:{color:"#1E3A8A",".MuiSelect-select":{py:1.5,pr:8},"&:focus":{backgroundColor:"white"}},IconComponent:()=>o.a.createElement(K.a,{sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"#1E3A8A"}},"expand_more")},[...Array(24)].map((e,t)=>{const a=Object(N.a)(new Date,t),r=`${a.getFullYear()}-${a.getMonth()+1}`,n=Object(I.a)(a,"MMM yyyy");return o.a.createElement(b.a,{key:`to-${r}`,value:r},n)}))),o.a.createElement(h.a,{variant:"filled",size:"small",sx:{minWidth:140,backgroundColor:"white",borderRadius:"4px"}},o.a.createElement(x.a,{value:z,onChange:e=>V(e.target.value),displayEmpty:!0,sx:{color:"#1E3A8A",".MuiSelect-select":{py:1.5,pr:8},"&:focus":{backgroundColor:"white"}},IconComponent:()=>o.a.createElement(K.a,{sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"#1E3A8A"}},"expand_more")},o.a.createElement(b.a,{value:"all"},"All Customer Types"),je.map(e=>o.a.createElement(b.a,{key:e,value:e},e))))))),o.a.createElement(d.a,{component:"main",sx:{flexGrow:1,padding:3,backgroundColor:"#F9FAFB"}},o.a.createElement(f.a,{maxWidth:"xl"},Pe&&o.a.createElement(d.a,{sx:{mb:6}},o.a.createElement(d.a,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"start",md:"center"},mb:4}},o.a.createElement(u.a,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold",color:"#111827",mb:{xs:2,md:0}}},Pe.name," Overview"),o.a.createElement(d.a,{sx:{display:"flex",alignItems:"center"}},o.a.createElement(K.a,{sx:{color:"#6B7280",mr:1}},"calendar_today"),o.a.createElement(u.a,{variant:"body2",color:"text.secondary"},o.a.createElement("span",{style:{fontWeight:500}},"Operational Since:")," ",new Date(Pe.operationalSince).toLocaleString("en-US",{month:"long",year:"numeric"})))),o.a.createElement(v.a,{container:!0,spacing:3},o.a.createElement(v.a,{item:!0,xs:12,sm:6,md:3},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(d.a,{sx:{display:"flex",alignItems:"flex-start"}},o.a.createElement(d.a,{sx:{backgroundColor:"#EBF5FF",borderRadius:"50%",p:1.5,mr:2}},o.a.createElement(K.a,{sx:{color:"#1E88E5"}},"groups")),o.a.createElement(d.a,null,o.a.createElement(u.a,{variant:"body2",color:"text.secondary"},"Population"),o.a.createElement(u.a,{variant:"h5",sx:{fontWeight:"bold",mt:.5}},Pe.population.toLocaleString()))))),o.a.createElement(v.a,{item:!0,xs:12,sm:6,md:3},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(d.a,{sx:{display:"flex",alignItems:"flex-start"}},o.a.createElement(d.a,{sx:{backgroundColor:"#E6FFFA",borderRadius:"50%",p:1.5,mr:2}},o.a.createElement(K.a,{sx:{color:"#26A69A"}},"location_on")),o.a.createElement(d.a,null,o.a.createElement(u.a,{variant:"body2",color:"text.secondary"},"Active Laundromats"),o.a.createElement(u.a,{variant:"h5",sx:{fontWeight:"bold",mt:.5}},Pe.laundromatCount),o.a.createElement(u.a,{variant:"caption",sx:{color:"text.secondary",mt:.5,display:"block"}},Be.filter(e=>{const t={};a.forEach(a=>{a.cleaning&&a.cleaning.cleaner===e.id&&a.cityId&&(t[a.cityId]=(t[a.cityId]||0)+1)});let r=null,o=0;return Object.keys(t).forEach(e=>{t[e]>o&&(o=t[e],r=e)}),r===l}).map(e=>e.name).join(", ")))))),o.a.createElement(v.a,{item:!0,xs:12,sm:6,md:3},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(d.a,{sx:{display:"flex",alignItems:"flex-start"}},o.a.createElement(d.a,{sx:{backgroundColor:"#F3E8FF",borderRadius:"50%",p:1.5,mr:2}},o.a.createElement(K.a,{sx:{color:"#AB47BC"}},"trending_up")),o.a.createElement(d.a,null,o.a.createElement(u.a,{variant:"body2",color:"text.secondary"},"Market Penetration"),o.a.createElement(u.a,{variant:"h5",sx:{fontWeight:"bold",mt:.5}},Pe.marketShare.toFixed(2),"%"),o.a.createElement(u.a,{variant:"caption",sx:{color:"text.secondary",mt:.5,display:"block"}},"Based on total population"))))),o.a.createElement(v.a,{item:!0,xs:12,sm:6,md:3},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(d.a,{sx:{display:"flex",alignItems:"flex-start"}},o.a.createElement(d.a,{sx:{backgroundColor:"#FFF7ED",borderRadius:"50%",p:1.5,mr:2}},o.a.createElement(K.a,{sx:{color:"#F59E0B"}},"shopping_bag")),o.a.createElement(d.a,null,o.a.createElement(u.a,{variant:"body2",color:"text.secondary"},"Average Orders Per Customer"),o.a.createElement(u.a,{variant:"h5",sx:{fontWeight:"bold",mt:.5}},Pe.avgOrderFrequency.toFixed(1)))))))),"all"!==l&&o.a.createElement("div",{style:{marginTop:"40px",marginBottom:"40px"}},o.a.createElement(_,{selectedCity:l,cityMapping:Z})),o.a.createElement(g.a,{sx:{p:3,mb:4,backgroundColor:"#EFF6FF",borderRadius:2,display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"start",md:"center"},justifyContent:"space-between",borderLeft:"5px solid #3B82F6"}},o.a.createElement(u.a,{variant:"h5",sx:{fontWeight:"bold",color:"#1E40AF",mb:{xs:2,md:0}}},"Showing Statistics for: ","all"===l?"All Cities":Z[l]),o.a.createElement(d.a,{sx:{display:"flex",alignItems:"center",backgroundColor:"white",px:2,py:1,borderRadius:1,boxShadow:"0 1px 2px rgba(0,0,0,0.1)"}},o.a.createElement(K.a,{sx:{color:"#3B82F6",mr:1}},"date_range"),o.a.createElement(u.a,{variant:"body1",sx:{mr:1,color:"#1E40AF",fontWeight:"medium"}},"From: ",Object(I.a)(s,"MMM yyyy")),o.a.createElement(u.a,{variant:"body1",sx:{color:"#1E40AF",fontWeight:"medium"}},"To: ",Object(I.a)(p,"MMM yyyy")))),o.a.createElement(u.a,{variant:"h5",gutterBottom:!0,sx:{mb:3,fontWeight:"bold",color:"#111827"}},"Performance Metrics"),o.a.createElement(v.a,{container:!0,spacing:3,sx:{mb:4}},o.a.createElement(v.a,{item:!0,xs:12,sm:6,md:3},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(d.a,{sx:{display:"flex",alignItems:"flex-start"}},o.a.createElement(d.a,{sx:{backgroundColor:"#EBF5FF",borderRadius:"50%",p:1.5,mr:2}},o.a.createElement(K.a,{sx:{color:"#2563EB"}},"shopping_bag")),o.a.createElement(d.a,null,o.a.createElement(u.a,{variant:"body2",color:"text.secondary"},"Total Orders"),o.a.createElement(u.a,{variant:"h5",sx:{fontWeight:"bold",mt:.5}},Fe.totalOrders.toLocaleString()))))),o.a.createElement(v.a,{item:!0,xs:12,sm:6,md:3},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(d.a,{sx:{display:"flex",alignItems:"flex-start"}},o.a.createElement(d.a,{sx:{backgroundColor:"#ECFDF5",borderRadius:"50%",p:1.5,mr:2}},o.a.createElement(K.a,{sx:{color:"#10B981"}},"attach_money")),o.a.createElement(d.a,null,o.a.createElement(u.a,{variant:"body2",color:"text.secondary"},"Total Revenue"),o.a.createElement(u.a,{variant:"h5",sx:{fontWeight:"bold",mt:.5}},"$",Fe.totalRevenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})))))),o.a.createElement(v.a,{item:!0,xs:12,sm:6,md:3},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(d.a,{sx:{display:"flex",alignItems:"flex-start"}},o.a.createElement(d.a,{sx:{backgroundColor:"#FEF3C7",borderRadius:"50%",p:1.5,mr:2}},o.a.createElement(K.a,{sx:{color:"#F59E0B"}},"trending_up")),o.a.createElement(d.a,null,o.a.createElement(u.a,{variant:"body2",color:"text.secondary"},"Avg. Order Value"),o.a.createElement(u.a,{variant:"h5",sx:{fontWeight:"bold",mt:.5}},"$",Fe.avgOrderValue.toFixed(2)))))),o.a.createElement(v.a,{item:!0,xs:12,sm:6,md:3},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(d.a,{sx:{display:"flex",alignItems:"flex-start"}},o.a.createElement(d.a,{sx:{backgroundColor:"#F3E8FF",borderRadius:"50%",p:1.5,mr:2}},o.a.createElement(K.a,{sx:{color:"#8B5CF6"}},"inventory_2")),o.a.createElement(d.a,null,o.a.createElement(u.a,{variant:"body2",color:"text.secondary"},"Avg. Order Weight"),o.a.createElement(u.a,{variant:"h5",sx:{fontWeight:"bold",mt:.5}},Fe.avgWeight.toFixed(2)," kg")))))),o.a.createElement(u.a,{variant:"h5",gutterBottom:!0,sx:{mt:6,mb:3,fontWeight:"bold",color:"#111827"}},"all"===l?"All Cities":Z[l]," Order Trends"),o.a.createElement(v.a,{container:!0,spacing:3,sx:{mb:4}},o.a.createElement(v.a,{item:!0,xs:12,md:8},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(u.a,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"medium",color:"#4B5563"}},"Weekly Orders - ","all"===l?"All Cities":Z[l]),o.a.createElement(w.a,{width:"100%",height:300},o.a.createElement(F.a,{data:"all"===l?ve:(null===Ke||void 0===Ke?void 0:Ke.weeklyHistoricalData)||ve},o.a.createElement(O.a,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),o.a.createElement(D.a,{dataKey:"name",tick:{fill:"#6B7280"},interval:"preserveStartEnd",minTickGap:15,tickMargin:8}),o.a.createElement(C.a,{tick:{fill:"#6B7280"}}),o.a.createElement(M.a,{contentStyle:{backgroundColor:"#FFFFFF",borderRadius:"0.375rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"none"},formatter:(e,t,a)=>[`${e} orders`,t],labelFormatter:(e,t)=>{var a;const r=null===t||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:a.payload;return(null===r||void 0===r?void 0:r.fullname)||e}}),o.a.createElement(S.a,{wrapperStyle:{paddingTop:"10px"}}),"all"===l?Object.values(Z).filter(e=>"All Cities"!==e).map((e,t)=>o.a.createElement(A.a,{key:e,type:"monotone",dataKey:e,stroke:ue[t%ue.length],strokeWidth:2,dot:{r:3,strokeWidth:1,fill:ue[t%ue.length]},activeDot:{r:6},isAnimationActive:!0,animationDuration:1e3,connectNulls:!0})):o.a.createElement(A.a,{type:"monotone",dataKey:"orders",name:Z[l],stroke:"#2563EB",strokeWidth:2,dot:{r:3,strokeWidth:1,fill:"#2563EB"},activeDot:{r:6},isAnimationActive:!0,animationDuration:1e3,connectNulls:!0}))))),o.a.createElement(v.a,{item:!0,xs:12,md:4},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(u.a,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"medium",color:"#4B5563"}},"Customer Types"),o.a.createElement(w.a,{width:"100%",height:300},o.a.createElement(j.a,null,o.a.createElement(B.a,{data:fe,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",label:e=>{let{name:t,percent:a}=e;return`${t}: ${(100*a).toFixed(0)}%`}},fe.map((e,t)=>o.a.createElement(R.a,{key:`cell-${t}`,fill:ue[t%ue.length]}))),o.a.createElement(M.a,{contentStyle:{backgroundColor:"#FFFFFF",borderRadius:"0.375rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"none"},formatter:e=>[`${e} orders`,"Count"]}),o.a.createElement(S.a,{wrapperStyle:{paddingTop:"10px"}})))))),o.a.createElement(v.a,{container:!0,spacing:3,sx:{mb:5}},o.a.createElement(v.a,{item:!0,xs:12,md:6},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(d.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2}},o.a.createElement(u.a,{variant:"h6",sx:{fontWeight:"medium",color:"#4B5563"}},"retention"===Se&&"Customer Retention Over Time","frequency"===Se&&"Orders Per Customer Over Time","processing"===Se&&"Processing Time Trend (Hours)","customerType"===Se&&"Customer Type Distribution","orderValue"===Se&&"Average Order Value Over Time"),o.a.createElement(h.a,{size:"small",sx:{minWidth:180}},o.a.createElement(x.a,{value:Se,onChange:e=>Ae(e.target.value),displayEmpty:!0,variant:"outlined",sx:{fontSize:"0.875rem"}},o.a.createElement(b.a,{value:"retention"},"Customer Retention"),o.a.createElement(b.a,{value:"frequency"},"Orders Per Customer"),o.a.createElement(b.a,{value:"processing"},"Processing Time"),o.a.createElement(b.a,{value:"customerType"},"Customer Type Split"),o.a.createElement(b.a,{value:"orderValue"},"Average Order Value")))),o.a.createElement(w.a,{width:"100%",height:300},"retention"===Se&&o.a.createElement(F.a,{data:Oe},o.a.createElement(O.a,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),o.a.createElement(D.a,{dataKey:"name",tick:{fill:"#6B7280"},interval:"preserveStartEnd"}),o.a.createElement(C.a,{tick:{fill:"#6B7280"},domain:[0,1],tickFormatter:e=>`${(100*e).toFixed(0)}%`}),o.a.createElement(M.a,{contentStyle:{backgroundColor:"#FFFFFF",borderRadius:"0.375rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"none"},formatter:e=>[`${(100*e).toFixed(1)}%`,"Retention Rate"],labelFormatter:e=>`${e}`}),o.a.createElement(A.a,{type:"monotone",dataKey:"retentionRate",stroke:"#8B5CF6",strokeWidth:2,name:"Retention Rate",dot:{r:4,strokeWidth:1,fill:"#8B5CF6"},connectNulls:!0})),"frequency"===Se&&o.a.createElement(F.a,{data:De},o.a.createElement(O.a,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),o.a.createElement(D.a,{dataKey:"name",tick:{fill:"#6B7280"},interval:"preserveStartEnd"}),o.a.createElement(C.a,{tick:{fill:"#6B7280"},domain:[0,"auto"],tickFormatter:e=>e.toFixed(1)}),o.a.createElement(M.a,{contentStyle:{backgroundColor:"#FFFFFF",borderRadius:"0.375rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"none"},formatter:e=>[e.toFixed(2),"Orders/Customer"],labelFormatter:(e,t)=>{var a,r;return(null===t||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:null===(r=a.payload)||void 0===r?void 0:r.fullName)||e}}),o.a.createElement(A.a,{type:"monotone",dataKey:"ordersPerCustomer",stroke:"#F59E0B",strokeWidth:2,name:"Orders Per Customer",dot:{r:4,strokeWidth:1,fill:"#F59E0B"},connectNulls:!0})),"processing"===Se&&o.a.createElement(F.a,{data:Ce},o.a.createElement(O.a,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),o.a.createElement(D.a,{dataKey:"name",tick:{fill:"#6B7280"},interval:"preserveStartEnd"}),o.a.createElement(C.a,{tick:{fill:"#6B7280"},domain:[0,"auto"]}),o.a.createElement(M.a,{contentStyle:{backgroundColor:"#FFFFFF",borderRadius:"0.375rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"none"},formatter:e=>[`${e.toFixed(1)} hours`,"Processing Time"]}),o.a.createElement(A.a,{type:"monotone",dataKey:"avgProcessingHours",stroke:"#10B981",strokeWidth:2,name:"Processing Time (Hours)",dot:{r:4,strokeWidth:1,fill:"#10B981"},connectNulls:!0})),"customerType"===Se&&o.a.createElement(L.a,{data:Me,barGap:0,barCategoryGap:10},o.a.createElement(O.a,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),o.a.createElement(D.a,{dataKey:"name",tick:{fill:"#6B7280"},interval:"preserveStartEnd"}),o.a.createElement(C.a,{tick:{fill:"#6B7280"},domain:[0,100],tickFormatter:e=>`${e}%`}),o.a.createElement(M.a,{contentStyle:{backgroundColor:"#FFFFFF",borderRadius:"0.375rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"none"},formatter:(e,t)=>[`${e.toFixed(1)}%`,t]}),o.a.createElement(S.a,{wrapperStyle:{paddingTop:"10px"}}),o.a.createElement(G.a,{dataKey:"residentialPercent",name:"Residential",fill:"#3B82F6",radius:[3,3,0,0]}),o.a.createElement(G.a,{dataKey:"commercialPercent",name:"Commercial",fill:"#F59E0B",radius:[3,3,0,0]})),"orderValue"===Se&&o.a.createElement(T.a,{data:ke},o.a.createElement(O.a,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),o.a.createElement(D.a,{dataKey:"name",tick:{fill:"#6B7280"}}),o.a.createElement(C.a,{tick:{fill:"#6B7280"}}),o.a.createElement(M.a,{contentStyle:{backgroundColor:"#FFFFFF",borderRadius:"0.375rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"none"},formatter:e=>[`$${e.toFixed(2)}`,"Avg. Order Value"]}),o.a.createElement(S.a,{wrapperStyle:{paddingTop:"10px"}}),o.a.createElement(W.a,{type:"monotone",dataKey:"value",fill:"#8884d8",fillOpacity:.3,stroke:"#8884d8"}),o.a.createElement(A.a,{type:"monotone",dataKey:"value",stroke:"#8884d8",connectNulls:!0}))))),o.a.createElement(v.a,{item:!0,xs:12,md:6},o.a.createElement(g.a,{sx:{p:3,height:"100%",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(u.a,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"medium",color:"#4B5563"}},"Order Weight Distribution"),o.a.createElement(w.a,{width:"100%",height:300},o.a.createElement(L.a,{data:we},o.a.createElement(O.a,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),o.a.createElement(D.a,{dataKey:"range",tick:{fill:"#6B7280"}}),o.a.createElement(C.a,{tick:{fill:"#6B7280"}}),o.a.createElement(M.a,{contentStyle:{backgroundColor:"#FFFFFF",borderRadius:"0.375rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"none"},formatter:e=>[`${e} orders`,"Count"]}),o.a.createElement(S.a,{wrapperStyle:{paddingTop:"10px"}}),o.a.createElement(G.a,{dataKey:"count",fill:"#26A69A",name:"Number of Orders"})))))),o.a.createElement(u.a,{variant:"h5",gutterBottom:!0,sx:{mt:6,mb:3,fontWeight:"bold",color:"#111827"}},"Laundromat Performance"),o.a.createElement(g.a,{sx:{p:0,mb:4,overflowX:"auto",borderRadius:2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},o.a.createElement(d.a,{sx:{p:3,borderBottom:"1px solid #E5E7EB"}},o.a.createElement(v.a,{container:!0,spacing:2},o.a.createElement(v.a,{item:!0,xs:12,md:3},o.a.createElement(h.a,{fullWidth:!0,variant:"outlined",size:"small"},o.a.createElement(k.a,null,"Filter by Laundromat"),o.a.createElement(x.a,{value:ae,onChange:e=>le(e.target.value),label:"Filter by Laundromat"},o.a.createElement(b.a,{value:"all"},"All Laundromats"),Be.map(e=>o.a.createElement(b.a,{key:e.id,value:e.id},e.name))))))),o.a.createElement(d.a,null,o.a.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},o.a.createElement("thead",null,o.a.createElement("tr",{style:{backgroundColor:"#F9FAFB"}},o.a.createElement("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid #E5E7EB",fontWeight:500,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#6B7280",cursor:"pointer"},onClick:()=>Ne("name")},"Laundromat Name ",o.a.createElement(Ie,{column:"name"})),o.a.createElement("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid #E5E7EB",fontWeight:500,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#6B7280",cursor:"pointer"},onClick:()=>Ne("orders")},"Total Orders ",o.a.createElement(Ie,{column:"orders"})),o.a.createElement("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid #E5E7EB",fontWeight:500,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#6B7280",cursor:"pointer"},onClick:()=>Ne("revenue")},"Revenue ",o.a.createElement(Ie,{column:"revenue"})),o.a.createElement("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid #E5E7EB",fontWeight:500,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#6B7280",cursor:"pointer"},onClick:()=>Ne("avgOrderValue")},"Avg. Order Value ",o.a.createElement(Ie,{column:"avgOrderValue"})),o.a.createElement("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid #E5E7EB",fontWeight:500,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#6B7280",cursor:"pointer"},onClick:()=>Ne("customers")},"Customers ",o.a.createElement(Ie,{column:"customers"})),o.a.createElement("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid #E5E7EB",fontWeight:500,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#6B7280",cursor:"pointer"},onClick:()=>Ne("returningCustomers")},"Returning ",o.a.createElement(Ie,{column:"returningCustomers"})),o.a.createElement("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid #E5E7EB",fontWeight:500,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#6B7280",cursor:"pointer"},onClick:()=>Ne("retentionScore")},"Retention ",o.a.createElement(Ie,{column:"retentionScore"})),o.a.createElement("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid #E5E7EB",fontWeight:500,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"#6B7280",cursor:"pointer"},onClick:()=>Ne("avgTurnaroundDays")},"Turnaround ",o.a.createElement(Ie,{column:"avgTurnaroundDays"})))),o.a.createElement("tbody",null,(()=>{let e=be;return"all"!==l&&(e=be.filter(e=>e.city===Z[l])),e=e.filter(e=>e.revenue>0&&e.orders>5),[...e].sort((e,t)=>{let a,r;switch(Le){case"name":a=he[e.id]||e.id,r=he[t.id]||t.id;break;case"avgOrderValue":a=e.orders>0?e.revenue/e.orders:0,r=t.orders>0?t.revenue/t.orders:0;break;case"retentionScore":a=e.retentionRate||0,r=t.retentionRate||0;break;default:a=e[Le],r=t[Le]}return"string"===typeof a&&"string"===typeof r?"asc"===Te?a.localeCompare(r):r.localeCompare(a):"asc"===Te?a-r:r-a}).map(e=>o.a.createElement("tr",{key:e.id,style:{borderBottom:"1px solid #E5E7EB"}},o.a.createElement("td",{style:{padding:"12px 16px"}},he[e.id]||e.id),o.a.createElement("td",{style:{padding:"12px 16px"}},e.orders),o.a.createElement("td",{style:{padding:"12px 16px"}},"$",e.revenue.toFixed(2)),o.a.createElement("td",{style:{padding:"12px 16px"}},"$",e.orders>0?(e.revenue/e.orders).toFixed(2):"0.00"),o.a.createElement("td",{style:{padding:"12px 16px"}},e.customers),o.a.createElement("td",{style:{padding:"12px 16px"}},e.returningCustomers),o.a.createElement("td",{style:{padding:"12px 16px"}},o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement("span",{style:{width:"12px",height:"12px",borderRadius:"50%",marginRight:"8px",backgroundColor:e.retentionRate>=.6?"#10B981":e.retentionRate>=.45?"#059669":e.retentionRate>=.35?"#F59E0B":e.retentionRate>=.25?"#D97706":e.retentionRate>=.15?"#DC2626":"#B91C1C"}}),o.a.createElement("span",{title:"Percentage of customers who are returning customers."},(100*e.retentionRate).toFixed(1),"%"))),o.a.createElement("td",{style:{padding:"12px 16px"}},e.avgTurnaroundDays.toFixed(1)," days")))})())))),o.a.createElement(d.a,{sx:{mb:4}},o.a.createElement(d.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3}},o.a.createElement(u.a,{variant:"h5",sx:{fontWeight:"bold",color:"#111827"}},"Order Locations - ",Z[l]||"All Cities")),o.a.createElement(g.a,{sx:{borderRadius:2,overflow:"hidden",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",height:"450px",position:"relative"}},o.a.createElement(P.a,{bootstrapURLKeys:{key:"AIzaSyAtGuXvA4E3HW0xM2yzRU7tphMTtxqKQD4",libraries:["places"]},center:ce||Re,zoom:ie,onChange:e=>{let{center:t,zoom:a,bounds:r}=e;se(t),de(a)},options:{fullscreenControl:!0,zoomControl:!0,mapTypeControl:!0,streetViewControl:!1,gestureHandling:"greedy",minZoom:5,maxZoom:18,styles:[{featureType:"all",elementType:"geometry",stylers:[{lightness:20}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e0f2fe"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f1f5f9"}]}]}}),o.a.createElement(d.a,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.85)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:10}},o.a.createElement(d.a,{sx:{backgroundColor:"#3B82F6",color:"white",padding:"12px 24px",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"16px"}},o.a.createElement(u.a,{variant:"h4",sx:{fontWeight:"bold"}},"Coming Soon!")),o.a.createElement(u.a,{variant:"body1",sx:{maxWidth:"450px",textAlign:"center",color:"#1F2937"}},"Our team is working on integrating detailed map data for all service areas. Check back soon for a visual representation of our order locations.")))))),o.a.createElement(d.a,{component:"footer",sx:{p:3,backgroundColor:"#F1F5F9",borderTop:"1px solid #E2E8F0"}},o.a.createElement(u.a,{variant:"body2",color:"text.secondary",align:"center"},"Laundry Service Analytics Dashboard \u2022 Last updated: ",(new Date).toLocaleDateString())))},ge=a(375);const Ee=Object(ge.a)("https://cnbpmepdmtpgrbllufcb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNuYnBtZXBkbXRwZ3JibGx1ZmNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5MjM4MjEsImV4cCI6MjA1MzQ5OTgyMX0.UqDleR4ucntrg9x6FNgJigKZjKiATFYiMiLiZZj3B2w");var ye=()=>{const[e,t]=Object(r.useState)(!0),[a,n]=Object(r.useState)(null),[l,c]=Object(r.useState)(null);Object(r.useEffect)(()=>{(async()=>{try{t(!0),console.log("Fetching data from Supabase...");const{data:a,error:r}=await Ee.from("appointments").select("*");if(r)throw console.error("Supabase error:",r),new Error(`Failed to load data from Supabase: ${r.message}`);if(a&&a.length>0)console.log(`Successfully loaded ${a.length} records from Supabase`),n(a);else{console.log("No data found in Supabase, falling back to local JSON file");const e=await fetch("/appointments.json");if(!e.ok)throw new Error(`Failed to load local data: ${e.status} ${e.statusText}`);const t=await e.json();n(t)}}catch(e){console.error("Error loading data:",e),c(e.message||"Failed to load data")}finally{t(!1)}})()},[]);const s=()=>{c(null),t(!0),(async()=>{try{const{data:a,error:r}=await Ee.from("appointments").select("*");if(r)throw console.error("Supabase error:",r),new Error(`Failed to load data from Supabase: ${r.message}`);if(a&&a.length>0)console.log(`Successfully loaded ${a.length} records from Supabase`),n(a);else{console.log("No data found in Supabase, falling back to local JSON file");const e=await fetch("/appointments.json");if(!e.ok)throw new Error(`Failed to load local data: ${e.status} ${e.statusText}`);const t=await e.json();n(t)}}catch(e){console.error("Error loading data:",e),c(e.message||"Failed to load data")}finally{t(!1)}})()};return e?o.a.createElement(d.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#F3F4F6"}},o.a.createElement(m.a,{size:60,sx:{mb:3}}),o.a.createElement(u.a,{variant:"h6",color:"text.secondary"},"Loading laundry service data...")):l?o.a.createElement(d.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#F3F4F6",p:3}},o.a.createElement(u.a,{variant:"h5",color:"error",gutterBottom:!0},"Error Loading Data"),o.a.createElement(u.a,{variant:"body1",color:"text.secondary",sx:{mb:3,maxWidth:600,textAlign:"center"}},l),o.a.createElement(p.a,{variant:"contained",color:"primary",onClick:s},"Retry")):o.a.createElement(pe,{jsonData:a})};const he=Object(c.a)({palette:{primary:{main:"#1E3A8A"},secondary:{main:"#10B981"},background:{default:"#F3F4F6"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(","),h5:{fontWeight:600},h6:{fontWeight:600}},components:{MuiPaper:{defaultProps:{elevation:0},styleOverrides:{root:{boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.05)"}}},MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:8}}},MuiSelect:{styleOverrides:{root:{borderRadius:8}}}}});l.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,{theme:he},o.a.createElement(i.a,null),o.a.createElement(ye,null))))}},[[400,1,2]]]);
//# sourceMappingURL=main.f014219e.chunk.js.map